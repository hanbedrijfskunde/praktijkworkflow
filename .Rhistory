def summarize_mermaid_diagram(diagram_code):
import re
from collections import defaultdict
actions = defaultdict(list)
current_phase = None
for line in diagram_code.strip().split('\n'):
line = line.strip()
if line.startswith("%%"):
current_phase = line.split("%%")[1].strip()
continue
match = re.match(r'(\w+)->>(\w+): (.+)', line)
if match:
actor, target, action = match.groups()
actions[actor].append(f"{current_phase}: {action}")
actions[target].append(f"{current_phase}: Receives action '{action}' from {actor}")
summary = {actor: sorted(activities) for actor, activities in actions.items()}
return summary
# Example usage:
diagram_code = """
sequenceDiagram
actor Organisatie
actor Praktijkbureau
actor Clustercoordinator
actor Student
actor Talentregie
actor Docentbegeleider/examinator
%% Fase 1: Toegang & Indienen
Organisatie->>Praktijkbureau: Aanvraag toegang
Praktijkbureau->>Organisatie: Wachtwoord per e-mail
Organisatie->>Bedrijvenportaal: Logt in en dient praktijkplaats in
Bedrijvenportaal->>Praktijkbureau: Nieuwe praktijkplaats details
%% Fase 2: Beoordelen & Verwerken
Praktijkbureau->>Clustercoordinator: Beoordeel praktijkplaats
alt Goedgekeurd
Clustercoordinator->>Praktijkbureau: PB BK: goedgekeurd STAGE/AOD
else Afgekeurd
Clustercoordinator->>Praktijkbureau: Praktijkplaats niet goedgekeurd
Praktijkbureau->>Organisatie: Informatie over afkeuring en aanpassingen
end
Praktijkbureau->>Bedrijvenportaal: Praktijkplaats zichtbaar maken voor studenten
%% Fase 3: Inschrijvingen & Goedkeuring
Praktijkbureau->>Student: Uitnodigingscode voor stageportaal
Student->>Stageportaal: Logt in en bekijkt praktijkplaatsen
Student->>Organisatie: Contact opnemen voor stage
Organisatie->>Student: Overeenkomst
Student->>Stageportaal: Praktijkplaats indienen
Stageportaal->>Praktijkbureau: Nieuwe inschrijving
Praktijkbureau->>Clustercoordinator: Beoordeel nieuwe inschrijving
alt Goedgekeurd
Clustercoordinator->>Praktijkbureau: PB BK: goedgekeurd STAGE/AOD
else Afgekeurd
Clustercoordinator->>Praktijkbureau: PB BK: afgekeurd STAGE/AOD
Praktijkbureau->>Student: Informatie over afkeuring en aanpassingen
end
%% Fase 4: Inzet begeleiding
Clustercoordinator->>Talentregie: Verzoek om overzicht beschikbare docentbegeleiders / examinatoren
Talentregie->>Clustercoordinator: Beschikbare docentbegeleiders / examinatoren
Clustercoordinator->>CRM: Koppel student aan docentbegeleider / examinator
Clustercoordinator->>Praktijkbureau: Koppeling voltooid
Praktijkbureau->>Organisatie: Bevestigingsmail
Praktijkbureau->>Student: Bevestigingsmail
Praktijkbureau->>Docentbegeleider/examinator: Bevestigingsmail
%% Fase 5: Overzicht en Onderhoud
loop Regelmatige updates
Praktijkbureau->>CRM: Bijhouden gegevens docentbegeleiders / examinatoren
Praktijkbureau->>CRM: Bijhouden van basisbestanden en status van praktijkplaatsen
end
"""
summary = summarize_mermaid_diagram(diagram_code)
for actor, actions in summary.items():
print(f"{actor}:")
for action in actions:
print(f"  - {action}")
def summarize_mermaid_diagram(diagram_code):
import re
from collections import defaultdict
actions = defaultdict(list)
current_phase = None
for line in diagram_code.strip().split('\n'):
line = line.strip()
if line.startswith("%%"):
current_phase = line.split("%%")[1].strip()
continue
match = re.match(r'(\w+)->>(\w+): (.+)', line)
if match:
actor, target, action = match.groups()
actions[actor].append(f"{current_phase}: {action}")
actions[target].append(f"{current_phase}: Receives action '{action}' from {actor}")
summary = {actor: sorted(activities) for actor, activities in actions.items()}
return summary
# Example usage:
diagram_code = """
sequenceDiagram
actor Organisatie
actor Praktijkbureau
actor Clustercoordinator
actor Student
actor Talentregie
actor Docentbegeleider/examinator
%% Fase 1: Toegang & Indienen
Organisatie->>Praktijkbureau: Aanvraag toegang
Praktijkbureau->>Organisatie: Wachtwoord per e-mail
Organisatie->>Bedrijvenportaal: Logt in en dient praktijkplaats in
Bedrijvenportaal->>Praktijkbureau: Nieuwe praktijkplaats details
%% Fase 2: Beoordelen & Verwerken
Praktijkbureau->>Clustercoordinator: Beoordeel praktijkplaats
alt Goedgekeurd
Clustercoordinator->>Praktijkbureau: PB BK: goedgekeurd STAGE/AOD
else Afgekeurd
Clustercoordinator->>Praktijkbureau: Praktijkplaats niet goedgekeurd
Praktijkbureau->>Organisatie: Informatie over afkeuring en aanpassingen
end
Praktijkbureau->>Bedrijvenportaal: Praktijkplaats zichtbaar maken voor studenten
%% Fase 3: Inschrijvingen & Goedkeuring
Praktijkbureau->>Student: Uitnodigingscode voor stageportaal
Student->>Stageportaal: Logt in en bekijkt praktijkplaatsen
Student->>Organisatie: Contact opnemen voor stage
Organisatie->>Student: Overeenkomst
Student->>Stageportaal: Praktijkplaats indienen
Stageportaal->>Praktijkbureau: Nieuwe inschrijving
Praktijkbureau->>Clustercoordinator: Beoordeel nieuwe inschrijving
alt Goedgekeurd
Clustercoordinator->>Praktijkbureau: PB BK: goedgekeurd STAGE/AOD
else Afgekeurd
Clustercoordinator->>Praktijkbureau: PB BK: afgekeurd STAGE/AOD
Praktijkbureau->>Student: Informatie over afkeuring en aanpassingen
end
%% Fase 4: Inzet begeleiding
Clustercoordinator->>Talentregie: Verzoek om overzicht beschikbare docentbegeleiders / examinatoren
Talentregie->>Clustercoordinator: Beschikbare docentbegeleiders / examinatoren
Clustercoordinator->>CRM: Koppel student aan docentbegeleider / examinator
Clustercoordinator->>Praktijkbureau: Koppeling voltooid
Praktijkbureau->>Organisatie: Bevestigingsmail
Praktijkbureau->>Student: Bevestigingsmail
Praktijkbureau->>Docentbegeleider/examinator: Bevestigingsmail
%% Fase 5: Overzicht en Onderhoud
loop Regelmatige updates
Praktijkbureau->>CRM: Bijhouden gegevens docentbegeleiders / examinatoren
Praktijkbureau->>CRM: Bijhouden van basisbestanden en status van praktijkplaatsen
end
"""
summary = summarize_mermaid_diagram(diagram_code)
for actor, actions in summary.items():
print(f"{actor}:")
for action in actions:
print(f"  - {action}")
#| echo: false
def summarize_mermaid_diagram_to_html(diagram_code):
import re
from collections import defaultdict
actions = defaultdict(lambda: {'perform': [], 'receive': []})
current_phase = None
for line in diagram_code.strip().split('\n'):
line = line.strip()
if line.startswith("%%"):
current_phase = line.split("%%")[1].strip()
continue
match = re.match(r'(\w+)->>(\w+): (.+)', line)
if match:
actor, target, action = match.groups()
actions[actor]['perform'].append(f"<li><strong>{current_phase}</strong>: {action}</li>")
actions[target]['receive'].append(f"<li><strong>{current_phase}</strong>: Receives action '{action}' from {actor}</li>")
# Generate HTML
html_output = ["<html><body><ul>"]
for actor, activity in actions.items():
html_output.append(f"<li><strong>{actor}:</strong><ul>")
if activity['perform']:
html_output.append("<li><strong>Actions performed:</strong><ul>")
html_output.extend(activity['perform'])
html_output.append("</ul></li>")
if activity['receive']:
html_output.append("<li><strong>Actions received:</strong><ul>")
html_output.extend(activity['receive'])
html_output.append("</ul></li>")
html_output.append("</ul></li>")
html_output.append("</ul></body></html>")
return "\n".join(html_output)
# Example usage:
diagram_code = """
sequenceDiagram
actor Organisatie
actor Praktijkbureau
actor Clustercoordinator
actor Student
actor Talentregie
actor Docentbegeleider/examinator
%% Fase 1: Toegang & Indienen
Organisatie->>Praktijkbureau: Aanvraag toegang
Praktijkbureau->>Organisatie: Wachtwoord per e-mail
Organisatie->>Bedrijvenportaal: Logt in en dient praktijkplaats in
Bedrijvenportaal->>Praktijkbureau: Nieuwe praktijkplaats details
%% Fase 2: Beoordelen & Verwerken
Praktijkbureau->>Clustercoordinator: Beoordeel praktijkplaats
alt Goedgekeurd
Clustercoordinator->>Praktijkbureau: PB BK: goedgekeurd STAGE/AOD
else Afgekeurd
Clustercoordinator->>Praktijkbureau: Praktijkplaats niet goedgekeurd
Praktijkbureau->>Organisatie: Informatie over afkeuring en aanpassingen
end
Praktijkbureau->>Bedrijvenportaal: Praktijkplaats zichtbaar maken voor studenten
%% Fase 3: Inschrijvingen & Goedkeuring
Praktijkbureau->>Student: Uitnodigingscode voor stageportaal
Student->>Stageportaal: Logt in en bekijkt praktijkplaatsen
Student->>Organisatie: Contact opnemen voor stage
Organisatie->>Student: Overeenkomst
Student->>Stageportaal: Praktijkplaats indienen
Stageportaal->>Praktijkbureau: Nieuwe inschrijving
Praktijkbureau->>Clustercoordinator: Beoordeel nieuwe inschrijving
alt Goedgekeurd
Clustercoordinator->>Praktijkbureau: PB BK: goedgekeurd STAGE/AOD
else Afgekeurd
Clustercoordinator->>Praktijkbureau: PB BK: afgekeurd STAGE/AOD
Praktijkbureau->>Student: Informatie over afkeuring en aanpassingen
end
%% Fase 4: Inzet begeleiding
Clustercoordinator->>Talentregie: Verzoek om overzicht beschikbare docentbegeleiders / examinatoren
Talentregie->>Clustercoordinator: Beschikbare docentbegeleiders / examinatoren
Clustercoordinator->>CRM: Koppel student aan docentbegeleider / examinator
Clustercoordinator->>Praktijkbureau: Koppeling voltooid
Praktijkbureau->>Organisatie: Bevestigingsmail
Praktijkbureau->>Student: Bevestigingsmail
Praktijkbureau->>Docentbegeleider/examinator: Bevestigingsmail
%% Fase 5: Overzicht en Onderhoud
loop Regelmatige updates
Praktijkbureau->>CRM: Bijhouden gegevens docentbegeleiders / examinatoren
Praktijkbureau->>CRM: Bijhouden van basisbestanden en status van praktijkplaatsen
end
"""
html_summary = summarize_mermaid_diagram_to_html(diagram_code)
print(html_summary)
reticulate::repl_python()
